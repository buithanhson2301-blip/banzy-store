(()=>{var e={};e.id=672,e.ids=[672],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},358:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},247:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>o,routeModule:()=>m,tree:()=>d});var a=t(7),r=t(8533),n=t(9377),l=t.n(n),i=t(9799),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=["",{children:["dashboard",{children:["staff",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2187)),"D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\dashboard\\staff\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3723)),"D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,364)),"D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,3472,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\dashboard\\staff\\page.tsx"],h="/dashboard/staff/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/staff/page",pathname:"/dashboard/staff",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5324:(e,s,t)=>{Promise.resolve().then(t.bind(t,7200))},7200:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(4714),r=t(7580),n=t(9858);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,n.Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);var i=t(155);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,n.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);var d=t(5208),o=t(8387),h=t(1102),x=t(4583),m=t(5082);let u={owner:"Chủ shop",staff:"Nh\xe2n vi\xean b\xe1n h\xe0ng",accountant:"Kế to\xe1n"},p={owner:"primary",staff:"success",accountant:"warning"};function b(){let{user:e}=(0,x.tN)(),[s,t]=(0,r.useState)([]),[n,b]=(0,r.useState)(!0),[f,j]=(0,r.useState)(!1),[v,g]=(0,r.useState)(null),[y,N]=(0,r.useState)(null),[k,w]=(0,r.useState)({name:"",email:"",role:"staff",password:""}),[q,P]=(0,r.useState)(""),C=async()=>{try{let{data:e}=await h.Z9.getAll();t(e)}catch(e){e.message?.includes("quyền")&&m.default.error("Chỉ chủ shop mới c\xf3 thể quản l\xfd nh\xe2n vi\xean")}finally{b(!1)}};(0,r.useEffect)(()=>{C()},[]);let _=e=>{e?(N(e),w({name:e.name,email:e.email,role:e.role,password:""})):(N(null),w({name:"",email:"",role:"staff",password:""})),j(!0)},Z=async e=>{e.preventDefault();try{y?(await h.Z9.update(y._id,k),m.default.success("Đ\xe3 cập nhật nh\xe2n vi\xean")):(await h.Z9.create(k),m.default.success("Đ\xe3 th\xeam nh\xe2n vi\xean mới")),j(!1),C()}catch(e){m.default.error(e.message||"C\xf3 lỗi xảy ra")}},M=async e=>{if(confirm(`Bạn c\xf3 chắc muốn x\xf3a "${e.name}"?`))try{await h.Z9.delete(e._id),m.default.success("Đ\xe3 x\xf3a nh\xe2n vi\xean"),C()}catch(e){m.default.error(e.message||"C\xf3 lỗi xảy ra")}},G=async()=>{if(!q||q.length<6){m.default.error("Mật khẩu phải c\xf3 \xedt nhất 6 k\xfd tự");return}try{await h.Z9.resetPassword(v._id,q),m.default.success("Đ\xe3 đặt lại mật khẩu"),g(null),P("")}catch(e){m.default.error(e.message||"C\xf3 lỗi xảy ra")}};return e?.role!=="owner"?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[a.jsx(l,{className:"w-16 h-16 text-dark-600 mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Kh\xf4ng c\xf3 quyền truy cập"}),a.jsx("p",{className:"text-dark-400",children:"Chỉ chủ shop mới c\xf3 thể quản l\xfd nh\xe2n vi\xean"})]}):(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Quản l\xfd nh\xe2n vi\xean"}),a.jsx("p",{className:"text-dark-400 text-sm mt-1",children:"Th\xeam v\xe0 ph\xe2n quyền nh\xe2n vi\xean cho cửa h\xe0ng"})]}),(0,a.jsxs)("button",{className:"btn btn-primary",onClick:()=>_(),children:[a.jsx(i.Z,{className:"w-5 h-5"})," Th\xeam nh\xe2n vi\xean"]})]}),a.jsx("div",{className:"card p-4 border-primary-500/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-500/20 rounded-full flex items-center justify-center text-primary-400 text-xl font-bold",children:e?.name?.charAt(0)?.toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"font-semibold",children:[e?.name," ",a.jsx("span",{className:"text-primary-400",children:"(Bạn)"})]}),a.jsx("p",{className:"text-sm text-dark-400",children:e?.email})]}),a.jsx("span",{className:"badge badge-primary",children:u.owner})]})}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"p-4 border-b border-dark-800",children:a.jsx("h2",{className:"font-semibold",children:"Danh s\xe1ch nh\xe2n vi\xean"})}),n?a.jsx("div",{className:"p-8 text-center",children:a.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full mx-auto"})}):0===s.length?(0,a.jsxs)("div",{className:"p-8 text-center text-dark-500",children:[a.jsx(l,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"Chưa c\xf3 nh\xe2n vi\xean n\xe0o"}),(0,a.jsxs)("button",{className:"btn btn-primary mt-4",onClick:()=>_(),children:[a.jsx(i.Z,{className:"w-4 h-4"})," Th\xeam nh\xe2n vi\xean đầu ti\xean"]})]}):a.jsx("div",{className:"divide-y divide-dark-800",children:s.map(e=>(0,a.jsxs)("div",{className:"p-4 flex items-center gap-4 hover:bg-dark-800/50",children:[a.jsx("div",{className:"w-10 h-10 bg-dark-700 rounded-full flex items-center justify-center text-dark-300 font-medium",children:e.name?.charAt(0)?.toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium",children:e.name}),a.jsx("p",{className:"text-sm text-dark-400 truncate",children:e.email})]}),a.jsx("span",{className:`badge badge-${p[e.role]}`,children:u[e.role]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx("button",{className:"btn btn-ghost p-2",onClick:()=>g(e),title:"Đặt lại mật khẩu",children:a.jsx(c,{className:"w-4 h-4"})}),a.jsx("button",{className:"btn btn-ghost p-2",onClick:()=>_(e),children:a.jsx(d.Z,{className:"w-4 h-4"})}),a.jsx("button",{className:"btn btn-ghost p-2 text-red-400",onClick:()=>M(e),children:a.jsx(o.Z,{className:"w-4 h-4"})})]})]},e._id))})]}),(0,a.jsxs)("div",{className:"card p-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Ph\xe2n quyền"}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"p-3 bg-dark-800 rounded-lg",children:[a.jsx("span",{className:"badge badge-success mb-2",children:"Nh\xe2n vi\xean b\xe1n h\xe0ng"}),(0,a.jsxs)("ul",{className:"text-dark-400 space-y-1",children:[a.jsx("li",{children:"• Tạo v\xe0 xử l\xfd đơn h\xe0ng"}),a.jsx("li",{children:"• Xem sản phẩm v\xe0 kh\xe1ch h\xe0ng"}),a.jsx("li",{children:"• Kh\xf4ng xem b\xe1o c\xe1o t\xe0i ch\xednh"})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-dark-800 rounded-lg",children:[a.jsx("span",{className:"badge badge-warning mb-2",children:"Kế to\xe1n"}),(0,a.jsxs)("ul",{className:"text-dark-400 space-y-1",children:[a.jsx("li",{children:"• Xem b\xe1o c\xe1o t\xe0i ch\xednh"}),a.jsx("li",{children:"• Quản l\xfd xuất nhập kho"}),a.jsx("li",{children:"• Kh\xf4ng tạo đơn h\xe0ng"})]})]})]})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-dark-900 border border-dark-800 rounded-xl w-full max-w-md",children:[a.jsx("div",{className:"p-4 border-b border-dark-800",children:a.jsx("h2",{className:"text-lg font-semibold",children:y?"Sửa nh\xe2n vi\xean":"Th\xeam nh\xe2n vi\xean mới"})}),(0,a.jsxs)("form",{onSubmit:Z,className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Họ t\xean *"}),a.jsx("input",{className:"input",required:!0,value:k.name,onChange:e=>w({...k,name:e.target.value})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Email *"}),a.jsx("input",{type:"email",className:"input",required:!0,value:k.email,onChange:e=>w({...k,email:e.target.value})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Vai tr\xf2 *"}),(0,a.jsxs)("select",{className:"input",value:k.role,onChange:e=>w({...k,role:e.target.value}),children:[a.jsx("option",{value:"staff",children:"Nh\xe2n vi\xean b\xe1n h\xe0ng"}),a.jsx("option",{value:"accountant",children:"Kế to\xe1n"})]})]}),!y&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:'Mật khẩu (để trống = "changeme123")'}),a.jsx("input",{type:"password",className:"input",placeholder:"Mật khẩu ban đầu",value:k.password,onChange:e=>w({...k,password:e.target.value})})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",className:"btn btn-secondary flex-1",onClick:()=>j(!1),children:"Hủy"}),a.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:y?"Cập nhật":"Th\xeam"})]})]})]})}),v&&a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-dark-900 border border-dark-800 rounded-xl w-full max-w-sm",children:[a.jsx("div",{className:"p-4 border-b border-dark-800",children:a.jsx("h2",{className:"text-lg font-semibold",children:"Đặt lại mật khẩu"})}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("p",{className:"text-dark-400",children:["Đặt mật khẩu mới cho ",a.jsx("strong",{children:v.name})]}),a.jsx("input",{type:"password",className:"input",placeholder:"Mật khẩu mới (tối thiểu 6 k\xfd tự)",value:q,onChange:e=>P(e.target.value)}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{className:"btn btn-secondary flex-1",onClick:()=>{g(null),P("")},children:"Hủy"}),a.jsx("button",{className:"btn btn-primary flex-1",onClick:G,children:"X\xe1c nhận"})]})]})]})})]})}},5208:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9858).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},155:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9858).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8387:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9858).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2187:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});let a=(0,t(1481).createProxy)(String.raw`D:\APP\Test app QLBH w GG\frontend\src\app\dashboard\staff\page.tsx`),{__esModule:r,$$typeof:n}=a,l=a.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[100,766,59,712,5],()=>t(247));module.exports=a})();