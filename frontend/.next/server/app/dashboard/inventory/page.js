(()=>{var e={};e.id=439,e.ids=[439],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},358:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1026:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>o,routeModule:()=>p,tree:()=>c});var r=s(7),a=s(8533),n=s(9377),i=s.n(n),l=s(9799),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["dashboard",{children:["inventory",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3457)),"D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\dashboard\\inventory\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3723)),"D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,364)),"D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,3472,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\dashboard\\inventory\\page.tsx"],h="/dashboard/inventory/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/inventory/page",pathname:"/dashboard/inventory",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8638:(e,t,s)=>{Promise.resolve().then(s.bind(s,2243))},2243:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(4714),a=s(7580),n=s(6297),i=s(3682);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s(9858).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var d=s(155),c=s(1102),o=s(4583),h=s(5082);function x(){let[e,t]=(0,a.useState)([]),[s,x]=(0,a.useState)([]),[p,u]=(0,a.useState)(!0),[m,b]=(0,a.useState)(""),[j,g]=(0,a.useState)(null),[y,f]=(0,a.useState)(""),N=async()=>{try{let[e,s]=await Promise.all([c.F3.getAll({search:m,limit:100}),c.F3.getLowStock()]);t(e.data.products),x(s.data)}catch(e){console.error("Failed to fetch inventory data:",e)}finally{u(!1)}};(0,a.useEffect)(()=>{N()},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>N(),300);return()=>clearTimeout(e)},[m]);let v=async()=>{if(y&&"0"!==y)try{await c.F3.updateStock(j._id,parseInt(y)),h.default.success("Đ\xe3 cập nhật tồn kho"),g(null),f(""),N()}catch(e){h.default.error(e.message||"C\xf3 lỗi xảy ra")}};return(0,r.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Quản l\xfd tồn kho"}),s.length>0&&(0,r.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(n.Z,{className:"w-5 h-5 text-yellow-400"}),(0,r.jsxs)("h3",{className:"font-semibold text-yellow-400",children:["Sản phẩm sắp hết h\xe0ng (",s.length,")"]})]}),r.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:s.slice(0,6).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-dark-800 rounded-lg p-3",children:[r.jsx("span",{className:"font-medium truncate",children:e.name}),(0,r.jsxs)("span",{className:"badge badge-danger ml-2",children:["C\xf2n ",e.quantity]})]},e._id))})]}),(0,r.jsxs)("div",{className:"relative max-w-md",children:[r.jsx(i.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-500"}),r.jsx("input",{type:"text",className:"input pl-10",placeholder:"T\xecm kiếm sản phẩm...",value:m,onChange:e=>b(e.target.value)})]}),r.jsx("div",{className:"table-container",children:p?r.jsx("div",{className:"p-8 text-center",children:r.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full mx-auto"})}):0===e.length?r.jsx("div",{className:"p-8 text-center text-dark-500",children:m?"Kh\xf4ng t\xecm thấy sản phẩm":"Chưa c\xf3 sản phẩm"}):(0,r.jsxs)("table",{className:"table",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"M\xe3 SP"}),r.jsx("th",{children:"T\xean sản phẩm"}),r.jsx("th",{children:"Gi\xe1 b\xe1n"}),r.jsx("th",{children:"Tồn kho"}),r.jsx("th",{children:"Ngưỡng"}),r.jsx("th",{children:"Trạng th\xe1i"}),r.jsx("th",{children:"Điều chỉnh"})]})}),r.jsx("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"font-medium",children:e.code||"-"}),r.jsx("td",{children:e.name}),r.jsx("td",{children:(0,o.xG)(e.price)}),r.jsx("td",{className:"font-bold text-lg",children:e.quantity}),r.jsx("td",{className:"text-dark-500",children:e.minStock}),r.jsx("td",{children:e.quantity<=e.minStock?(0,r.jsxs)("span",{className:"badge badge-danger",children:[r.jsx(n.Z,{className:"w-3 h-3 mr-1"}),"Sắp hết"]}):r.jsx("span",{className:"badge badge-success",children:"Đủ h\xe0ng"})}),r.jsx("td",{children:(0,r.jsxs)("div",{className:"flex gap-1",children:[r.jsx("button",{className:"btn btn-secondary p-2",onClick:()=>{g(e),f("-1")},children:r.jsx(l,{className:"w-4 h-4"})}),r.jsx("button",{className:"btn btn-secondary p-2",onClick:()=>{g(e),f("1")},children:r.jsx(d.Z,{className:"w-4 h-4"})})]})})]},e._id))})]})}),j&&r.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-dark-900 border border-dark-800 rounded-xl w-full max-w-sm",children:[r.jsx("div",{className:"p-4 border-b border-dark-800",children:r.jsx("h2",{className:"text-lg font-semibold",children:"Điều chỉnh tồn kho"})}),(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-dark-400",children:"Sản phẩm"}),r.jsx("p",{className:"font-semibold text-lg",children:j.name}),(0,r.jsxs)("p",{className:"text-dark-400 mt-2",children:["Tồn kho hiện tại: ",r.jsx("span",{className:"font-bold text-white",children:j.quantity})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label",children:"Số lượng điều chỉnh"}),r.jsx("input",{type:"number",className:"input text-center text-lg",value:y,onChange:e=>f(e.target.value),placeholder:"+10 hoặc -5"}),r.jsx("p",{className:"text-sm text-dark-500 mt-1 text-center",children:"Nhập số dương để tăng, số \xe2m để giảm"})]}),y&&(0,r.jsxs)("p",{className:"text-center",children:["Tồn kho mới: ",r.jsx("span",{className:`font-bold ${j.quantity+parseInt(y)<0?"text-red-400":"text-green-400"}`,children:j.quantity+parseInt(y||"0")})]})]}),(0,r.jsxs)("div",{className:"p-4 border-t border-dark-800 flex gap-3",children:[r.jsx("button",{className:"btn btn-secondary flex-1",onClick:()=>{g(null),f("")},children:"Hủy"}),r.jsx("button",{className:"btn btn-primary flex-1",onClick:v,disabled:!y||"0"===y||j.quantity+parseInt(y||"0")<0,children:"X\xe1c nhận"})]})]})})]})}},6297:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9858).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},155:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9858).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3682:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9858).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3457:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,s(1481).createProxy)(String.raw`D:\APP\Test app QLBH w GG\frontend\src\app\dashboard\inventory\page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[100,766,59,712,5],()=>s(1026));module.exports=r})();