(()=>{var e={};e.id=95,e.ids=[95],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},358:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1751:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>d});var r=s(7),a=s(8533),n=s(9377),i=s.n(n),l=s(9799),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["dashboard",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8723)),"D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\dashboard\\products\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3723)),"D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,364)),"D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,3472,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\APP\\Test app QLBH w GG\\frontend\\src\\app\\dashboard\\products\\page.tsx"],u="/dashboard/products/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/products/page",pathname:"/dashboard/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},571:(e,t,s)=>{Promise.resolve().then(s.bind(s,2848))},2848:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(4714),a=s(7580),n=s(155),i=s(3682),l=s(6297),c=s(5208),d=s(8387),o=s(1102),u=s(4583),p=s(5082);function h(){let[e,t]=(0,a.useState)([]),[s,h]=(0,a.useState)(!0),[x,m]=(0,a.useState)(""),[g,y]=(0,a.useState)(!1),[b,j]=(0,a.useState)(null),[v,f]=(0,a.useState)({name:"",code:"",category:"",price:"",quantity:"",minStock:"5",description:""}),N=async()=>{try{let{data:e}=await o.F3.getAll({search:x,limit:100});t(e.products)}catch(e){console.error("Failed to fetch products:",e)}finally{h(!1)}};(0,a.useEffect)(()=>{N()},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{N()},300);return()=>clearTimeout(e)},[x]);let q=e=>{e?(j(e),f({name:e.name,code:e.code||"",category:e.category||"",price:e.price.toString(),quantity:e.quantity.toString(),minStock:e.minStock.toString(),description:""})):(j(null),f({name:"",code:"",category:"",price:"",quantity:"",minStock:"5",description:""})),y(!0)},k=async e=>{e.preventDefault();try{let e={...v,price:parseFloat(v.price),quantity:parseInt(v.quantity),minStock:parseInt(v.minStock)};b?(await o.F3.update(b._id,e),p.default.success("Đ\xe3 cập nhật sản phẩm")):(await o.F3.create(e),p.default.success("Đ\xe3 th\xeam sản phẩm mới")),y(!1),N()}catch(e){p.default.error(e.message||"C\xf3 lỗi xảy ra")}},P=async e=>{if(confirm(`Bạn c\xf3 chắc muốn x\xf3a "${e.name}"?`))try{await o.F3.delete(e._id),p.default.success("Đ\xe3 x\xf3a sản phẩm"),N()}catch(e){p.default.error(e.message||"C\xf3 lỗi xảy ra")}};return(0,r.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Sản phẩm"}),(0,r.jsxs)("button",{className:"btn btn-primary",onClick:()=>q(),children:[r.jsx(n.Z,{className:"w-5 h-5"})," Th\xeam sản phẩm"]})]}),(0,r.jsxs)("div",{className:"relative max-w-md",children:[r.jsx(i.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-500"}),r.jsx("input",{type:"text",className:"input pl-10",placeholder:"T\xecm kiếm sản phẩm...",value:x,onChange:e=>m(e.target.value)})]}),r.jsx("div",{className:"table-container",children:s?r.jsx("div",{className:"p-8 text-center",children:r.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full mx-auto"})}):0===e.length?r.jsx("div",{className:"p-8 text-center text-dark-500",children:x?"Kh\xf4ng t\xecm thấy sản phẩm":"Chưa c\xf3 sản phẩm n\xe0o"}):(0,r.jsxs)("table",{className:"table",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"M\xe3 SP"}),r.jsx("th",{children:"T\xean sản phẩm"}),r.jsx("th",{children:"Danh mục"}),r.jsx("th",{children:"Gi\xe1 b\xe1n"}),r.jsx("th",{children:"Tồn kho"}),r.jsx("th",{children:"Thao t\xe1c"})]})}),r.jsx("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"font-medium",children:e.code||"-"}),r.jsx("td",{children:e.name}),r.jsx("td",{children:r.jsx("span",{className:"badge badge-gray",children:e.category||"Kh\xe1c"})}),r.jsx("td",{children:(0,u.xG)(e.price)}),r.jsx("td",{children:(0,r.jsxs)("span",{className:`badge ${e.quantity<=e.minStock?"badge-danger":"badge-success"}`,children:[e.quantity<=e.minStock&&r.jsx(l.Z,{className:"w-3 h-3 mr-1"}),e.quantity]})}),r.jsx("td",{children:(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{className:"btn btn-ghost p-2",onClick:()=>q(e),children:r.jsx(c.Z,{className:"w-4 h-4"})}),r.jsx("button",{className:"btn btn-ghost p-2 text-red-400",onClick:()=>P(e),children:r.jsx(d.Z,{className:"w-4 h-4"})})]})})]},e._id))})]})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-dark-900 border border-dark-800 rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-4 border-b border-dark-800",children:r.jsx("h2",{className:"text-lg font-semibold",children:b?"Sửa sản phẩm":"Th\xeam sản phẩm mới"})}),(0,r.jsxs)("form",{onSubmit:k,className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label",children:"T\xean sản phẩm *"}),r.jsx("input",{className:"input",required:!0,value:v.name,onChange:e=>f({...v,name:e.target.value})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label",children:"M\xe3 sản phẩm"}),r.jsx("input",{className:"input",value:v.code,onChange:e=>f({...v,code:e.target.value})})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label",children:"Danh mục"}),r.jsx("input",{className:"input",value:v.category,onChange:e=>f({...v,category:e.target.value})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label",children:"Gi\xe1 b\xe1n *"}),r.jsx("input",{type:"text",className:"input",required:!0,placeholder:"150.000",value:v.price?Number(v.price.replace(/\./g,"")).toLocaleString("vi-VN"):"",onChange:e=>{let t=e.target.value.replace(/\./g,"").replace(/[^0-9]/g,"");f({...v,price:t})}})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label",children:"Số lượng *"}),r.jsx("input",{type:"number",className:"input",required:!0,min:"0",value:v.quantity,onChange:e=>f({...v,quantity:e.target.value})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label",children:"Ngưỡng cảnh b\xe1o"}),r.jsx("input",{type:"number",className:"input",min:"0",value:v.minStock,onChange:e=>f({...v,minStock:e.target.value})})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",className:"btn btn-secondary flex-1",onClick:()=>y(!1),children:"Hủy"}),r.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:b?"Cập nhật":"Th\xeam mới"})]})]})]})})]})}},6297:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9858).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5208:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9858).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},155:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9858).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3682:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9858).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8387:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9858).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8723:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,s(1481).createProxy)(String.raw`D:\APP\Test app QLBH w GG\frontend\src\app\dashboard\products\page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[100,766,59,712,5],()=>s(1751));module.exports=r})();