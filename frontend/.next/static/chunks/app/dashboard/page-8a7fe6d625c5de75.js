(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{8347:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(7068).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},9019:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(7068).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3287:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(7068).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},3317:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(7068).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},8034:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(7068).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},2611:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(7068).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3282:function(e,t,s){Promise.resolve().then(s.bind(s,3600))},3600:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var n=s(7821),r=s(8078),a=s(6871),c=s.n(a),i=s(8034),o=s(3317),l=s(3287),d=s(2611),u=s(8347),h=s(9019),p=s(189),m=s(229);function g(){let[e,t]=(0,r.useState)(null),[s,a]=(0,r.useState)([]),[g,x]=(0,r.useState)([]),[f,v]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{try{let[e,s,n]=await Promise.all([p.vD.getStats(),p.vD.getRecentOrders(5),p.vD.getTopProducts(5)]);t(e.data),a(s.data),x(n.data)}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{v(!1)}})()},[]),f)?(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full"})}):(0,n.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Tổng quan"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"stats-card",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:(0,n.jsx)(i.Z,{className:"w-6 h-6 text-green-400"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-dark-400 text-sm",children:"Doanh thu"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:(0,m.xG)((null==e?void 0:e.revenue.total)||0)})]})]}),(0,n.jsxs)("p",{className:"text-sm text-dark-500 mt-2",children:["H\xf4m nay: ",(0,m.xG)((null==e?void 0:e.revenue.today)||0)]})]}),(0,n.jsxs)("div",{className:"stats-card",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-primary-500/20 rounded-xl flex items-center justify-center",children:(0,n.jsx)(o.Z,{className:"w-6 h-6 text-primary-400"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-dark-400 text-sm",children:"Đơn h\xe0ng"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:(null==e?void 0:e.orders.total)||0})]})]}),(0,n.jsxs)("p",{className:"text-sm text-dark-500 mt-2",children:["H\xf4m nay: ",(null==e?void 0:e.orders.today)||0," đơn"]})]}),(0,n.jsxs)("div",{className:"stats-card",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center",children:(0,n.jsx)(l.Z,{className:"w-6 h-6 text-purple-400"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-dark-400 text-sm",children:"Sản phẩm"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:(null==e?void 0:e.products.active)||0})]})]}),(0,n.jsxs)("p",{className:"text-sm text-dark-500 mt-2",children:["Tổng: ",(null==e?void 0:e.products.total)||0," sản phẩm"]})]}),(0,n.jsx)("div",{className:"stats-card",children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,n.jsx)(d.Z,{className:"w-6 h-6 text-blue-400"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-dark-400 text-sm",children:"Kh\xe1ch h\xe0ng"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:(null==e?void 0:e.customers.total)||0})]})]})})]}),((null==e?void 0:e.products.lowStock)||0)>0&&(0,n.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 flex items-center gap-4",children:[(0,n.jsx)(u.Z,{className:"w-6 h-6 text-yellow-400 flex-shrink-0"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"font-medium text-yellow-400",children:"Cảnh b\xe1o tồn kho"}),(0,n.jsxs)("p",{className:"text-sm text-dark-400",children:["C\xf3 ",null==e?void 0:e.products.lowStock," sản phẩm sắp hết h\xe0ng"]})]}),(0,n.jsx)(c(),{href:"/dashboard/inventory",className:"btn btn-secondary text-sm",children:"Xem chi tiết"})]}),(0,n.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-dark-800",children:[(0,n.jsx)("h2",{className:"font-semibold",children:"Đơn h\xe0ng gần đ\xe2y"}),(0,n.jsxs)(c(),{href:"/dashboard/orders",className:"text-sm text-primary-400 hover:text-primary-300 flex items-center gap-1",children:["Xem tất cả ",(0,n.jsx)(h.Z,{className:"w-4 h-4"})]})]}),(0,n.jsx)("div",{className:"divide-y divide-dark-800",children:s.length>0?s.map(e=>(0,n.jsxs)("div",{className:"p-4 flex items-center justify-between hover:bg-dark-800/50",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:e.orderCode}),(0,n.jsx)("p",{className:"text-sm text-dark-400",children:e.customerName||"Kh\xe1ch v\xe3ng lai"})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"font-medium",children:(0,m.xG)(e.total)}),(0,n.jsx)("span",{className:"badge badge-".concat(m.AQ[e.status]),children:m.cL[e.status]})]})]},e._id)):(0,n.jsx)("div",{className:"p-8 text-center text-dark-500",children:"Chưa c\xf3 đơn h\xe0ng n\xe0o"})})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-dark-800",children:[(0,n.jsx)("h2",{className:"font-semibold",children:"Sản phẩm b\xe1n chạy"}),(0,n.jsxs)(c(),{href:"/dashboard/reports",className:"text-sm text-primary-400 hover:text-primary-300 flex items-center gap-1",children:["Xem b\xe1o c\xe1o ",(0,n.jsx)(h.Z,{className:"w-4 h-4"})]})]}),(0,n.jsx)("div",{className:"divide-y divide-dark-800",children:g.length>0?g.map((e,t)=>(0,n.jsxs)("div",{className:"p-4 flex items-center gap-4 hover:bg-dark-800/50",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(t<3?"bg-primary-500/20 text-primary-400":"bg-dark-800 text-dark-400"),children:t+1}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"font-medium truncate",children:e.productName}),(0,n.jsxs)("p",{className:"text-sm text-dark-400",children:["Đ\xe3 b\xe1n: ",e.totalQuantity]})]}),(0,n.jsx)("p",{className:"font-medium text-green-400",children:(0,m.xG)(e.totalRevenue)})]},e._id)):(0,n.jsx)("div",{className:"p-8 text-center text-dark-500",children:"Chưa c\xf3 dữ liệu b\xe1n h\xe0ng"})})]})]})]})}},189:function(e,t,s){"use strict";s.d(t,{F3:function(){return a},IK:function(){return u},Z9:function(){return l},ZE:function(){return d},fU:function(){return c},g3:function(){return i},kv:function(){return r},v2:function(){return h},vD:function(){return o}});let n=s(1892).Z.create({baseURL:"http://localhost:8080/api",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),n.interceptors.response.use(e=>e,e=>{var t,s,n,r,a,c;let i=(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Đ\xe3 xảy ra lỗi";return(null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.code)==="LICENSE_EXPIRED"&&(window.location.href="/license-expired"),(null===(a=e.response)||void 0===a?void 0:a.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject({message:i,...null===(c=e.response)||void 0===c?void 0:c.data})});let r={register:e=>n.post("/auth/register",e),login:e=>n.post("/auth/login",e),getMe:()=>n.get("/auth/me"),verifyEmail:e=>n.get("/auth/verify-email/".concat(e)),forgotPassword:e=>n.post("/auth/forgot-password",{email:e}),resetPassword:(e,t)=>n.post("/auth/reset-password/".concat(e),{password:t}),updateShop:e=>n.put("/auth/shop",e),changePassword:(e,t)=>n.put("/auth/change-password",{currentPassword:e,newPassword:t})},a={getAll:e=>n.get("/products",{params:e}),getById:e=>n.get("/products/".concat(e)),create:e=>n.post("/products",e),update:(e,t)=>n.put("/products/".concat(e),t),delete:e=>n.delete("/products/".concat(e)),getCategories:()=>n.get("/products/categories"),getLowStock:()=>n.get("/products/low-stock"),updateStock:(e,t,s)=>n.patch("/products/".concat(e,"/stock"),{adjustment:t,reason:s})},c={getAll:e=>n.get("/customers",{params:e}),getById:e=>n.get("/customers/".concat(e)),create:e=>n.post("/customers",e),update:(e,t)=>n.put("/customers/".concat(e),t),delete:e=>n.delete("/customers/".concat(e)),getOrders:e=>n.get("/customers/".concat(e,"/orders"))},i={getAll:e=>n.get("/orders",{params:e}),getById:e=>n.get("/orders/".concat(e)),create:e=>n.post("/orders",e),updateStatus:(e,t,s)=>n.patch("/orders/".concat(e,"/status"),{status:t,note:s}),cancel:(e,t)=>n.post("/orders/".concat(e,"/cancel"),{reason:t}),getStats:()=>n.get("/orders/stats")},o={getStats:()=>n.get("/dashboard/stats"),getRevenue:e=>n.get("/dashboard/revenue",{params:e}),getTopProducts:e=>n.get("/dashboard/top-products",{params:{limit:e}}),getRecentOrders:e=>n.get("/dashboard/recent-orders",{params:{limit:e}})},l={getAll:()=>n.get("/staff"),create:e=>n.post("/staff",e),update:(e,t)=>n.put("/staff/".concat(e),t),delete:e=>n.delete("/staff/".concat(e)),resetPassword:(e,t)=>n.post("/staff/".concat(e,"/reset-password"),{newPassword:t})},d={getAll:e=>n.get("/suppliers",{params:e}),getById:e=>n.get("/suppliers/".concat(e)),create:e=>n.post("/suppliers",e),update:(e,t)=>n.put("/suppliers/".concat(e),t),delete:e=>n.delete("/suppliers/".concat(e))},u={getAll:()=>n.get("/integrations"),get:e=>n.get("/integrations/".concat(e)),connect:(e,t)=>n.post("/integrations/".concat(e,"/connect"),t),disconnect:e=>n.post("/integrations/".concat(e,"/disconnect")),updateSettings:(e,t)=>n.patch("/integrations/".concat(e,"/settings"),t),syncProducts:e=>n.post("/integrations/".concat(e,"/sync-products")),syncOrders:e=>n.post("/integrations/".concat(e,"/sync-orders"))},h={get:()=>n.get("/tier-settings"),update:e=>n.put("/tier-settings",{tiers:e})}},229:function(e,t,s){"use strict";s.d(t,{AQ:function(){return l},cL:function(){return o},p6:function(){return i},tN:function(){return a},xG:function(){return c}});var n=s(8433),r=s(189);let a=(0,n.Ue)((e,t)=>({user:null,shop:null,token:localStorage.getItem("token"),isLoading:!0,isAuthenticated:!1,login:async(t,s)=>{let{data:n}=await r.kv.login({email:t,password:s});localStorage.setItem("token",n.token),e({user:n.user,shop:n.shop,token:n.token,isAuthenticated:!0,isLoading:!1})},register:async t=>{let{data:s}=await r.kv.register(t);localStorage.setItem("token",s.token),e({user:s.user,shop:s.shop,token:s.token,isAuthenticated:!0,isLoading:!1})},logout:()=>{localStorage.removeItem("token"),e({user:null,shop:null,token:null,isAuthenticated:!1,isLoading:!1})},fetchUser:async()=>{let t=localStorage.getItem("token");if(!t){e({isLoading:!1,isAuthenticated:!1});return}try{let{data:s}=await r.kv.getMe();e({user:s.user,shop:s.shop,token:t,isAuthenticated:!0,isLoading:!1})}catch(t){localStorage.removeItem("token"),e({user:null,shop:null,token:null,isAuthenticated:!1,isLoading:!1})}},setAuth:(t,s,n)=>{localStorage.setItem("token",n),e({user:t,shop:s,token:n,isAuthenticated:!0,isLoading:!1})},setShop:t=>{e({shop:t})}})),c=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s={day:"2-digit",month:"2-digit",year:"numeric"};return t&&(s.hour="2-digit",s.minute="2-digit"),new Date(e).toLocaleDateString("vi-VN",s)},o={pending:"Chờ xử l\xfd",processing:"Đang xử l\xfd",shipping:"Đang giao",completed:"Ho\xe0n th\xe0nh",cancelled:"Đ\xe3 hủy"},l={pending:"warning",processing:"primary",shipping:"primary",completed:"success",cancelled:"danger"}},8940:function(e,t,s){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=s(8078),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,c=n.useEffect,i=n.useLayoutEffect,o=n.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!r(e,s)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),n=a({inst:{value:s,getSnapshot:t}}),r=n[0].inst,d=n[1];return i(function(){r.value=s,r.getSnapshot=t,l(r)&&d({inst:r})},[e,s,t]),c(function(){return l(r)&&d({inst:r}),e(function(){l(r)&&d({inst:r})})},[e]),o(s),s};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},6259:function(e,t,s){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=s(8078),r=s(4268),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},c=r.useSyncExternalStore,i=n.useRef,o=n.useEffect,l=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,n,r){var u=i(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;var p=c(e,(u=l(function(){function e(e){if(!o){if(o=!0,c=e,e=n(e),void 0!==r&&h.hasValue){var t=h.value;if(r(t,e))return i=t}return i=e}if(t=i,a(c,e))return t;var s=n(e);return void 0!==r&&r(t,s)?(c=e,t):(c=e,i=s)}var c,i,o=!1,l=void 0===s?null:s;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,s,n,r]))[0],u[1]);return o(function(){h.hasValue=!0,h.value=p},[p]),d(p),p}},4268:function(e,t,s){"use strict";e.exports=s(8940)},8780:function(e,t,s){"use strict";e.exports=s(6259)},8433:function(e,t,s){"use strict";s.d(t,{Ue:function(){return h}});let n=e=>{let t;let s=new Set,n=(e,n)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=n?n:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,a={setState:n,getState:r,getInitialState:()=>c,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},c=t=e(n,r,a);return a},r=e=>e?n(e):n;var a=s(8078),c=s(8780);let{useDebugValue:i}=a,{useSyncExternalStoreWithSelector:o}=c,l=!1,d=e=>e,u=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?r(e):e,s=(e,s)=>(function(e,t=d,s){s&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);let n=o(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return i(n),n})(t,e,s);return Object.assign(s,t),s},h=e=>e?u(e):u}},function(e){e.O(0,[798,871,115,141,744],function(){return e(e.s=3282)}),_N_E=e.O()}]);