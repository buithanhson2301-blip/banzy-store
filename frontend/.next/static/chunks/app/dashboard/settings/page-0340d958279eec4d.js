(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{2104:function(e,t,s){Promise.resolve().then(s.bind(s,2731))},2731:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(7821),n=s(8078),r=s(1859),o=s(6941),c=s(1629),i=s(8643),l=s(1238),d=s(2080),u=s(189),p=s(229),h=s(7485);function g(){var e,t;let{shop:s,setShop:g}=(0,p.tN)(),[m,x]=(0,n.useState)({name:(null==s?void 0:s.name)||"",description:(null==s?void 0:s.description)||"",phone:(null==s?void 0:s.phone)||"",address:(null==s?void 0:s.address)||""}),[v,f]=(0,n.useState)(!1),[w,N]=(0,n.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[j,b]=(0,n.useState)(!1),[k,y]=(0,n.useState)({current:!1,new:!1,confirm:!1}),S=async e=>{e.preventDefault(),f(!0);try{let{data:e}=await u.kv.updateShop(m);g(e.shop),h.default.success(e.message)}catch(e){h.default.error(e.message||"C\xf3 lỗi xảy ra")}finally{f(!1)}},P=async e=>{if(e.preventDefault(),w.newPassword!==w.confirmPassword){h.default.error("Mật khẩu mới kh\xf4ng khớp");return}if(w.newPassword.length<6){h.default.error("Mật khẩu mới phải c\xf3 \xedt nhất 6 k\xfd tự");return}b(!0);try{let{data:e}=await u.kv.changePassword(w.currentPassword,w.newPassword);h.default.success(e.message),N({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){h.default.error(e.message||"C\xf3 lỗi xảy ra")}finally{b(!1)}};return(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in max-w-3xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(r.Z,{className:"w-8 h-8 text-primary-400"}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"C\xe0i đặt t\xe0i khoản"})]}),(0,a.jsxs)("div",{className:"bg-dark-900 border border-dark-800 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)(o.Z,{className:"w-6 h-6 text-primary-400"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Th\xf4ng tin Shop"})]}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"T\xean Shop *"}),(0,a.jsx)("input",{className:"input",required:!0,value:m.name,onChange:e=>x({...m,name:e.target.value}),placeholder:"T\xean shop của bạn"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"M\xf4 tả"}),(0,a.jsx)("textarea",{className:"input",rows:3,value:m.description,onChange:e=>x({...m,description:e.target.value}),placeholder:"M\xf4 tả ngắn về shop..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Số điện thoại"}),(0,a.jsx)("input",{className:"input",value:m.phone,onChange:e=>x({...m,phone:e.target.value}),placeholder:"0909..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Địa chỉ"}),(0,a.jsx)("input",{className:"input",value:m.address,onChange:e=>x({...m,address:e.target.value}),placeholder:"Địa chỉ shop"})]})]}),(0,a.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:v,children:[v?(0,a.jsx)("span",{className:"animate-spin",children:"⏳"}):(0,a.jsx)(c.Z,{className:"w-5 h-5"}),"Lưu thay đổi"]})]})]}),(0,a.jsxs)("div",{className:"bg-dark-900 border border-dark-800 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)(i.Z,{className:"w-6 h-6 text-yellow-400"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Đổi mật khẩu"})]}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"label",children:"Mật khẩu hiện tại *"}),(0,a.jsx)("input",{type:k.current?"text":"password",className:"input pr-10",required:!0,value:w.currentPassword,onChange:e=>N({...w,currentPassword:e.target.value})}),(0,a.jsx)("button",{type:"button",className:"absolute right-3 top-9 text-dark-400 hover:text-white",onClick:()=>y({...k,current:!k.current}),children:k.current?(0,a.jsx)(l.Z,{className:"w-5 h-5"}):(0,a.jsx)(d.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"label",children:"Mật khẩu mới *"}),(0,a.jsx)("input",{type:k.new?"text":"password",className:"input pr-10",required:!0,minLength:6,value:w.newPassword,onChange:e=>N({...w,newPassword:e.target.value})}),(0,a.jsx)("button",{type:"button",className:"absolute right-3 top-9 text-dark-400 hover:text-white",onClick:()=>y({...k,new:!k.new}),children:k.new?(0,a.jsx)(l.Z,{className:"w-5 h-5"}):(0,a.jsx)(d.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"label",children:"X\xe1c nhận mật khẩu *"}),(0,a.jsx)("input",{type:k.confirm?"text":"password",className:"input pr-10",required:!0,minLength:6,value:w.confirmPassword,onChange:e=>N({...w,confirmPassword:e.target.value})}),(0,a.jsx)("button",{type:"button",className:"absolute right-3 top-9 text-dark-400 hover:text-white",onClick:()=>y({...k,confirm:!k.confirm}),children:k.confirm?(0,a.jsx)(l.Z,{className:"w-5 h-5"}):(0,a.jsx)(d.Z,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("p",{className:"text-sm text-dark-400",children:"Mật khẩu phải c\xf3 \xedt nhất 6 k\xfd tự"}),(0,a.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:j,children:[j?(0,a.jsx)("span",{className:"animate-spin",children:"⏳"}):(0,a.jsx)(i.Z,{className:"w-5 h-5"}),"Đổi mật khẩu"]})]})]}),(0,a.jsxs)("div",{className:"bg-dark-900 border border-dark-800 rounded-xl p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCCB Th\xf4ng tin License"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-dark-400",children:"G\xf3i hiện tại"}),(0,a.jsx)("p",{className:"text-xl font-bold text-primary-400",children:(null==s?void 0:null===(e=s.license)||void 0===e?void 0:e.plan)==="premium"?"\uD83C\uDF1F Premium":"\uD83C\uDD93 D\xf9ng thử"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-dark-400",children:"Hết hạn"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:(null==s?void 0:null===(t=s.license)||void 0===t?void 0:t.trialEndsAt)?new Date(s.license.trialEndsAt).toLocaleDateString("vi-VN"):"Chưa x\xe1c định"})]})]})]})]})}},189:function(e,t,s){"use strict";s.d(t,{F3:function(){return r},IK:function(){return u},Z9:function(){return l},ZE:function(){return d},fU:function(){return o},g3:function(){return c},kv:function(){return n},v2:function(){return p},vD:function(){return i}});let a=s(1892).Z.create({baseURL:"http://localhost:8080/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),a.interceptors.response.use(e=>e,e=>{var t,s,a,n,r,o;let c=(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Đ\xe3 xảy ra lỗi";return(null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.code)==="LICENSE_EXPIRED"&&(window.location.href="/license-expired"),(null===(r=e.response)||void 0===r?void 0:r.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject({message:c,...null===(o=e.response)||void 0===o?void 0:o.data})});let n={register:e=>a.post("/auth/register",e),login:e=>a.post("/auth/login",e),getMe:()=>a.get("/auth/me"),verifyEmail:e=>a.get("/auth/verify-email/".concat(e)),forgotPassword:e=>a.post("/auth/forgot-password",{email:e}),resetPassword:(e,t)=>a.post("/auth/reset-password/".concat(e),{password:t}),updateShop:e=>a.put("/auth/shop",e),changePassword:(e,t)=>a.put("/auth/change-password",{currentPassword:e,newPassword:t})},r={getAll:e=>a.get("/products",{params:e}),getById:e=>a.get("/products/".concat(e)),create:e=>a.post("/products",e),update:(e,t)=>a.put("/products/".concat(e),t),delete:e=>a.delete("/products/".concat(e)),getCategories:()=>a.get("/products/categories"),getLowStock:()=>a.get("/products/low-stock"),updateStock:(e,t,s)=>a.patch("/products/".concat(e,"/stock"),{adjustment:t,reason:s})},o={getAll:e=>a.get("/customers",{params:e}),getById:e=>a.get("/customers/".concat(e)),create:e=>a.post("/customers",e),update:(e,t)=>a.put("/customers/".concat(e),t),delete:e=>a.delete("/customers/".concat(e)),getOrders:e=>a.get("/customers/".concat(e,"/orders"))},c={getAll:e=>a.get("/orders",{params:e}),getById:e=>a.get("/orders/".concat(e)),create:e=>a.post("/orders",e),updateStatus:(e,t,s)=>a.patch("/orders/".concat(e,"/status"),{status:t,note:s}),cancel:(e,t)=>a.post("/orders/".concat(e,"/cancel"),{reason:t}),getStats:()=>a.get("/orders/stats")},i={getStats:()=>a.get("/dashboard/stats"),getRevenue:e=>a.get("/dashboard/revenue",{params:e}),getTopProducts:e=>a.get("/dashboard/top-products",{params:{limit:e}}),getRecentOrders:e=>a.get("/dashboard/recent-orders",{params:{limit:e}})},l={getAll:()=>a.get("/staff"),create:e=>a.post("/staff",e),update:(e,t)=>a.put("/staff/".concat(e),t),delete:e=>a.delete("/staff/".concat(e)),resetPassword:(e,t)=>a.post("/staff/".concat(e,"/reset-password"),{newPassword:t})},d={getAll:e=>a.get("/suppliers",{params:e}),getById:e=>a.get("/suppliers/".concat(e)),create:e=>a.post("/suppliers",e),update:(e,t)=>a.put("/suppliers/".concat(e),t),delete:e=>a.delete("/suppliers/".concat(e))},u={getAll:()=>a.get("/integrations"),get:e=>a.get("/integrations/".concat(e)),connect:(e,t)=>a.post("/integrations/".concat(e,"/connect"),t),disconnect:e=>a.post("/integrations/".concat(e,"/disconnect")),updateSettings:(e,t)=>a.patch("/integrations/".concat(e,"/settings"),t),syncProducts:e=>a.post("/integrations/".concat(e,"/sync-products")),syncOrders:e=>a.post("/integrations/".concat(e,"/sync-orders"))},p={get:()=>a.get("/tier-settings"),update:e=>a.put("/tier-settings",{tiers:e})}},229:function(e,t,s){"use strict";s.d(t,{AQ:function(){return l},cL:function(){return i},p6:function(){return c},tN:function(){return r},xG:function(){return o}});var a=s(8433),n=s(189);let r=(0,a.Ue)((e,t)=>({user:null,shop:null,token:localStorage.getItem("token"),isLoading:!0,isAuthenticated:!1,login:async(t,s)=>{let{data:a}=await n.kv.login({email:t,password:s});localStorage.setItem("token",a.token),e({user:a.user,shop:a.shop,token:a.token,isAuthenticated:!0,isLoading:!1})},register:async t=>{let{data:s}=await n.kv.register(t);localStorage.setItem("token",s.token),e({user:s.user,shop:s.shop,token:s.token,isAuthenticated:!0,isLoading:!1})},logout:()=>{localStorage.removeItem("token"),e({user:null,shop:null,token:null,isAuthenticated:!1,isLoading:!1})},fetchUser:async()=>{let t=localStorage.getItem("token");if(!t){e({isLoading:!1,isAuthenticated:!1});return}try{let{data:s}=await n.kv.getMe();e({user:s.user,shop:s.shop,token:t,isAuthenticated:!0,isLoading:!1})}catch(t){localStorage.removeItem("token"),e({user:null,shop:null,token:null,isAuthenticated:!1,isLoading:!1})}},setAuth:(t,s,a)=>{localStorage.setItem("token",a),e({user:t,shop:s,token:a,isAuthenticated:!0,isLoading:!1})},setShop:t=>{e({shop:t})}})),o=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s={day:"2-digit",month:"2-digit",year:"numeric"};return t&&(s.hour="2-digit",s.minute="2-digit"),new Date(e).toLocaleDateString("vi-VN",s)},i={pending:"Chờ xử l\xfd",processing:"Đang xử l\xfd",shipping:"Đang giao",completed:"Ho\xe0n th\xe0nh",cancelled:"Đ\xe3 hủy"},l={pending:"warning",processing:"primary",shipping:"primary",completed:"success",cancelled:"danger"}}},function(e){e.O(0,[798,370,115,141,744],function(){return e(e.s=2104)}),_N_E=e.O()}]);